<!DOCTYPE html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Document</title><link rel=stylesheet href=../css/index.css><link rel=stylesheet href=../lib/bootstrap/dist/css/bootstrap.min.css><link rel=stylesheet href=../lib/swiper/css/swiper.min.css><link rel=stylesheet href=../lib/pagination/pagination.css></head><body><div class=headerwrap><div class=header><span>欢迎来到聚美</span> <a href=./login.html>请登录</a> <a href=./zhuce.html>快速注册</a><ul><li><a href="">正品保证</a></li><li><a href="">订单查询</a></li><li><a href="">❤收藏的品牌</a></li><li class=myjm><a href="">我的聚美<span class=caret></span></a><div class=myjumei><ul><li><a href="">我的订单</a></li><li><a href="">我的现金券</a></li><li><a href="">我的红包</a></li><li><a href="">我的余额</a></li><li><a href="">我的提现退款</a></li><li><a href="">我的收藏</a></li><li><a href="">我的心愿单</a></li><li><a href="">会员中心</a></li><li><a href="">礼品卡兑换</a></li></ul></div></li><li>|</li><li class=phone>手机聚美</li><li>|</li><li><a href="">更多<span class=caret></span></a></li></ul></div></div><div class=search><div class=logo><a href=""><img src=http://p0.jmstatic.com/templates/jumei/images/logo_new_v1.jpg alt=""></a></div><div class=ss><input type=text class=ss_txt> <input type=button value=搜索 class=ss_btn><div class=ss_navwrap><ul class=ss_nav><li><a href="">保湿</a></li><li><a href="">面膜</a></li><li><a href="">洗面奶</a></li><li><a href="">补水</a></li><li><a href="">香水</a></li><li><a href="">眼霜</a></li><li><a href="">口红</a></li><li><a href="">护肤套装</a></li><li><a href="">BB霜</a></li></ul></div></div><div class=cart><div class=cart_img><img src=http://p0.jmstatic.com/assets/cart.gif alt=""></div><button><a href=./cart.html>去购物车结算</a></button></div></div><div class=navwrap><div class=nav><ul><li>首页</li><li>极速免税店</li><li>母婴特卖</li><li>美妆商城<span class=caret></span></li><li>国际轻奢</li><li>服饰运动</li><li>鞋包配饰</li></ul></div></div><div class="banner container" style=width:100%><div class=swiper-container><div class=swiper-wrapper><div class=swiper-slide><img src=http://p0.jmstatic.com/banner/3483/239364_1920_350_002-web.jpg?1583047129 alt=""></div><div class=swiper-slide><img src=http://p0.jmstatic.com/banner/3483/239386_1920_350_002-web.jpg?1583146881 alt=""></div></div><div class="swiper-button-prev prev"></div><div class=swiper-button-next></div></div></div><div class=tab><ul class=tab_top><li class="curren today">今日疯抢</li><li class=tomorrow>明日预告</li></ul><div><ul class=tab_center><li><img src=http://p0.jmstatic.com//jmstore/image/000/005/5493_std/5e5d07f4b6587_535_212.jpg?1583157932 alt=""></li><li><img src=http://p0.jmstatic.com//jmstore/image/000/007/7220_std/5e5933798373f_535_212.jpg?1582904424 alt=""></li></ul><ul class=tab_bottom><li><img src=http://p0.jmstatic.com//jmstore/image/000/006/6797_std/5e58d630a737f_535_212.jpg?1582882883 alt=""></li><li><img src=http://p0.jmstatic.com//jmstore/image/000/004/4521_std/5e5a289503b1f_535_212.jpg?1582967229 alt=""></li></ul></div></div><div class="layout_1090 today_later_main"><h2 class="floor_item_title floor_must_see" id=mustsee></h2></div><div class="layout_1090 today_new_deal"><div class=today_deal_tit><h2 class=floor_head id=today_deals>今日上新</h2><p class=today_deals_tip>每日十点上新</p></div><div class="pagi m-style"></div><div class=box><ul><li><img src=http://p1.jmstatic.com/product/005/128/5128296_std/5128296_dx_1000_400.jpg><div class=deals_tags><span class="tags_list tags_xinpin"></span></div></li></ul></div></div><div id=footer_container><div class=footer_con id=footer_copyright><p class=footer_copy_con>Copyright © 2010-2015 北京创锐文化传媒有限公司 Jumei.com 保留一切权利。客服热线：400-123-8888<br>京公网安备 11010102001226 号 | <a href=http://www.miibeian.gov.cn target=_blank rel=nofollow>京ICP证111033号</a> | 食品流通许可证 SP1101051110165515（1-1） <a href=http://mp5.jmstatic.com/mobile/pc/chuangrui.jpg target=_blank rel=nofollow>营业执照</a> <a href=http://f1.jmstatic.com/static_account/dist/v1.0.85067/images/other/zhidu.pdf target=_blank rel=nofollow>公示制度</a></p><p><a href=javascript:void(0) class="footer_copy_logo logo01" rel=nofollow></a> <a href=http://www.itrust.org.cn/Home/Index/itrust_certifi/wm/1693268180.html target=_blank class="footer_copy_logo logo02" rel=nofollow></a> <a href=javascript:void(0) class="footer_copy_logo logo03" rel=nofollow></a> <a href=javascript:void(0) class="footer_copy_logo logo04" rel=nofollow></a> <a href="https://ss.knet.cn/verifyseal.dll?sn=e1908021101057894518jv000000&amp;ct=df&amp;pa=nU60yFg7nXl37yQG" target=_blank class="footer_copy_logo logo05" rel=nofollow></a></p></div></div><script src=../lib/jquery/dist/jquery.min.js></script><script src=../lib/swiper/js/swiper.min.js></script><script src=../lib/pagination/pagination.js></script><script src=../js/index.js></script><script>// swiper 轮播图
        var mySwiper = new Swiper ('.swiper-container', {
        // direction: 'vertical', // 垂直切换选项
        loop: true, // 循环模式选项
        autoplay: {
          delay: 2000
        },
        // effect: 'cube', // 翻转特效

        // 如果需要前进后退按钮
        navigation: {
          nextEl: '.swiper-button-next',
          prevEl: '.swiper-button-prev',
        },
      })       

        // 选项卡
        var td = document.getElementsByClassName('today')[0];
        var tm = document.getElementsByClassName('tomorrow')[0];
        var tbst = document.getElementsByClassName('tab_center')[0]; 
        var tbbt = document.getElementsByClassName('tab_bottom')[0];

        td.onclick = function(){
            tm.className = ''
            this.className = 'curren'
            tbbt.style.display = 'none'
        }
        tm.onclick = function(){
            td.className = ''
            this.className = 'curren'
            tbbt.style.display = 'block'
        }

        // 分页器
        let currPage = 1
        let flag = true
        let list = []
        getList()
        function getList() {
        $.ajax({
            url: '../lib/list.json',
            dataType: 'json',
            success: function (res) {
            // console.log(res)
            // 一共 102 条数据, 数组.length
            // 一页显示多少条(假定一页显示 12 条), 一共 9 页

            // 2. 渲染分页器
            $('.pagi').pagination({
                pageCount: Math.ceil(res.length / 12), // 总页数
                current: 1, // 当前页
                jump: true,
                coping: true,
                homePage: '首页', // 首页按钮的文本
                endPage: '末页', // 末页按钮的文本
                prevContent: '上页',
                nextContent: '下页',
                callback: function (api) { // 当你切换页面的时候会触发
                // api.getCurrent() 获取当前是第几页
                // console.log(api.getCurrent())
                // console.log(res)
                let curr = api.getCurrent()

                // console.log(curr)
                // 根据是第几页, 从我的总数组里面筛选出一部分数据
                //   slice 方法包前不包后
                list = res.slice((curr - 1) * 12, curr * 12)
                console.log(list);
                
                // slice 不改变原始数组, 只是从数组里面拿到一些内容
                // splice 方法才是改变原始数组, 从原始数组里面删除

                // 3-2. 每次使用分页器切换的时候渲染一次
                bindHtml(list) 
                }
            })

            // 3. 先把第一页的数据渲染一次
            bindHtml(res.slice(0, 12))
            localStorage.setItem('goodsInfo', JSON.stringify(res.slice(0, 12)))
            list = JSON.parse(localStorage.getItem('goodsInfo'))
            }
            
        })
        }
        function bindHtml(list) {
            // console.log(list)
            // 根据 list 数组渲染页面就可以了
            let str = ''
            list.forEach(item => {
                str += `
                <li data-id="${ item.id }">
                    <img src="${item.images }">
                    <div class="deals_tags">
                        <span class="tags_list tags_xinpin"></span>
                    </div>
                    <p>${ item.name }</p>
                    <span>￥${ item.price }</span>
                </li>
                `
            })
            $('.box > ul').html(str)
        }
        

        // 2. 事件委托的形式给每一个 li 添加点击事件
        $('.box > ul').on('click', 'li', function () {
        // this 就是你点击的那一个 li
        // console.log(this)
        // 找到渲染这个 li 的数据
        // 从 list 数组里面找到这个数据
        // 点击 li 的时候, 拿到自己身上的 id 属性
        const id = $(this).data('id')
        console.log(id);
		console.log(list);

        // 2. 去到 list 这个数组里面找到一个 id 对应的数据
        //   这个数据就是渲染这个 li 的数据
        let data = null
        for (let i = 0; i < list.length; i++) {
            // console.log("aaa");
            
            if (list[i].id === id) {
            data = list[i]
            break
            }
        }
        console.log(data) // 我要找到的渲染当前这个 li 的数据

        // 3. 把找到的数据存储到 localStorage 里面
        //   为了详情页面使用
        localStorage.setItem('goodsInfo', JSON.stringify(data))

        // 4. 跳转页面
        window.location.href = './detail.html'
        })</script></body></html>